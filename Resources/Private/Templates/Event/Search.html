{namespace e=Undkonsorten\Eventmgmt\ViewHelpers}

<f:layout name="Default" />
<f:section name="main">

	<!--f:render partial="List/ArchiveSwitch"/-->
	<div class="module-list list event eventSearch">
		<!-- Templates/Event/Search.html -->
	<f:render partial="Search/Form" arguments="{regions:regions, topics:topics, types:types, locations:locations, timeslots:timeslots, demand:demand, demanded:demanded}" />
	<f:if condition="{timeslots}">
		<ul class="timeslots horizontal">
			<li class="timeslot"><f:link.action pageUid="{settings.pidFilterList}" action="search" controller="Event"><f:translate key="events.showAllTimeslots">Show all timeslots</f:translate></f:link.action></li>
			<f:for each="{timeslots}" as="timeslot">
				<li class="timeslot"><f:link.action pageUid="{settings.pidFilterList}" action="search" controller="Event" arguments="{demand:{timeslot:timeslot}}" title="{timeslot}"><f:format.date format="%d.%m.">{timeslot.start}</f:format.date></f:link.action></li>
			</f:for>
		</ul>
	</f:if>
			<f:if condition="{demanded}">
				<f:then>
					<e:widget.paginate objects="{demanded}" as="paginatedEvents" pagination="pagination" configuration="{itemsPerPage: settings.itemsPerPage, insertAbove: 0, insertBelow: 1, maximumNumberOfLinks: 5}" additionalParamsPrefix="tx_eventmgmt_list" additionalParams="{demand:demand.parameter}">
						<ul class="list-items">
							<f:for each="{paginatedEvents}" as="event">
								<f:render partial="List/Event" arguments="{event: event, demand:demand}" />
							</f:for>
						</ul>
					</e:widget.paginate>
				</f:then>
				<f:else>
					<div class="no-event-found">
						<f:translate key="search.results.none" />
					</div>
				</f:else>
			</f:if>
	</div>
</f:section>
