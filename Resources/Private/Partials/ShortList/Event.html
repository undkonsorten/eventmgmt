<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">

<li class="list event shortList{f:if(condition:event.firstImage,else:' noImg')}" id="e{event.uid}">
	<f:if condition="{settings.shortList.displayImages}">
		<f:if condition="{event.firstImage}">
			<f:if condition="{0:settings.chosePidDetail} == {0:'fromCalendar'}">
			<f:then>
				<f:link.action pageUid="{event.calendar.singlePid}" action="show" arguments="{event:event}" title="{event.title}">
					<f:image maxWidth="{settings.shortList.imageWidth}" src="{event.firstImage.uid}" treatIdAsReference="1" alt="{event.firstImage.originalResource.alternative}" title="{event.firstImage.originalResource.alternative}" />
				</f:link.action>
			</f:then>
			<f:else>
				<f:if condition="{settings.pidDetail}">
				<f:then>
					<f:link.action pageUid="{settings.pidDetail}" action="show" arguments="{event:event}" title="{event.title}">
						<f:image maxWidth="{settings.shortList.imageWidth}" src="{event.firstImage.uid}" treatIdAsReference="1" alt="{event.firstImage.originalResource.alternative}" title="{event.firstImage.originalResource.alternative}" />
					</f:link.action>
				</f:then>
				<f:else>
					<f:link.action action="show" arguments="{event:event}" title="{event.title}">
						<f:image maxWidth="{settings.shortList.imageWidth}" src="{event.firstImage.uid}" treatIdAsReference="1" alt="{event.firstImage.originalResource.alternative}" title="{event.firstImage.originalResource.alternative}" />
					</f:link.action>
				</f:else>
				</f:if>
			</f:else>
			</f:if>
			
		</f:if>
	</f:if>
	<div class="meta">
		<f:render partial="Date/Short" arguments="{start:event.start,end:event.end,allDay:event.allDay}" />
		<f:if condition="{event.closestCity}">
			<span class="location">{event.closestCity}</span>
		</f:if>
	</div>			
	<h2>
	<f:if condition="{0:settings.chosePidDetail} == {0:'fromCalendar'}">
	<f:then>
		<f:if condition="{event.calendar.singlePid}">
		<f:then>
			<f:link.action pageUid="{event.calendar.singlePid}" action="show" arguments="{event:event}" title="{event.title}">{event.title}
			<f:if condition="{event.subtitle}">: <span class="subtitle">{event.subtitle}</span></f:if></f:link.action>
		</f:then>
		<f:else>
			<f:link.action action="show" arguments="{event:event}" title="{event.title}">{event.title}<f:if condition="{event.subtitle}">
			<f:then>: <span class="subtitle">{event.subtitle}</span></f:then></f:if></f:link.action>
		</f:else>
		</f:if>
	</f:then>
	<f:else>
		<f:if condition="{settings.pidDetail}">
		<f:then>
			<f:link.action pageUid="{settings.pidDetail}" action="show" arguments="{event:event}" title="{event.title}">{event.title}<f:if condition="{event.subtitle}">
			<f:then>: <span class="subtitle">{event.subtitle}</span></f:then></f:if></f:link.action>
		</f:then>
		<f:else>
			<f:link.action action="show" arguments="{event:event}" title="{event.title}">{event.title}<f:if condition="{event.subtitle}">
			<f:then>: <span class="subtitle">{event.subtitle}</span></f:then></f:if></f:link.action>
		</f:else>
		</f:if>
	</f:else>
	</f:if>
	
	
	</h2>
	<f:if condition="{settings.shortList.displayTeaser}">
		<p class="teaser">
			<f:format.crop maxCharacters="{settings.shortList.cropTeaser} " respectWordBoundaries="false">
				<f:if condition="{event.teaser}">
					<f:then><f:format.nl2br>{event.teaser}</f:format.nl2br></f:then>
					<f:else><f:format.stripTags>{event.description}</f:format.stripTags></f:else>
				</f:if>
			</f:format.crop> 
			<f:if condition="{0:settings.chosePidDetail} == {0:'fromCalendar'}">
			<f:then>
				<f:if condition="{event.calendar.singlePid}">
				<f:then>
					<f:link.action pageUid="{event.calendar.singlePid}"action="show" arguments="{event:event}"><f:translate key="moreLink" /></f:link.action>
				</f:then>
				<f:else>
					<f:link.action action="show" arguments="{event:event}"><f:translate key="moreLink" /></f:link.action>
				</f:else>
				</f:if>
				
			</f:then>
			<f:else>
				<f:if condition="{settings.pidDetail}">
				<f:then>
					<f:link.action pageUid="{settings.pidDetail}"action="show" arguments="{event:event}"><f:translate key="moreLink" /></f:link.action>
				</f:then>
				<f:else>
					<f:link.action action="show" arguments="{event:event}"><f:translate key="moreLink" /></f:link.action>
				</f:else>
				</f:if>
			</f:else>
			</f:if>
			
		</p>
	</f:if>	
</li>

</html>
