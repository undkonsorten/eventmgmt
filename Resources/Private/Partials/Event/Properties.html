<f:if condition="{event.firstImage}">
	<div class="figures">
		<figure>
			<f:image maxWidth="{settings.show.imageWidth}" src="{event.firstImage.uid}" treatIdAsReference="1" alt="{event.firstImage.originalResource.alternative}" class="image" />
			<f:if condition="{event.firstImage.originalResource.description}">
				<figcaption>{event.firstImage.originalResource.description}</figcaption>
			</f:if>
		</figure>
	</div>
</f:if>
<h2 class="headline title">{event.title}<f:if condition="{event.subtitle}"><span class="subtitle">{event.subtitle}</span></f:if></h2>
<div class="meta layer">
	<f:render partial="Date/Show" arguments="{start:event.start,end:event.end,allDay:event.allDay}" />

	<f:if condition="{event.location}">
		<f:then>
			<div class="location"><span class="label"><f:translate key="locationShort" />:</span> {event.closestCity} | {event.location.name}</div>
		</f:then>
		<f:else>
			<f:if condition="{event.closestCity}">
				<div class="location"><span class="label"><f:translate key="locationShort" />:</span> {event.closestCity}</div>
			</f:if>
		</f:else>
	</f:if>
	<f:if condition="{event.category}">
		<div class="category"><span class="label">{f:if(condition:'{f:count(subject:event.category)} > 1',then:'{f:translate(key:"categories")}', else:'{f:translate(key:"category")}')}:</span>
			<f:for each="{event.category}" as="category" iteration="categoryIteration">
				{category.title}<f:if condition="{categoryIteration.isLast}"><f:else>, </f:else></f:if>
			</f:for>
		</div>
		<f:for each="{event.topics}" as="topic" iteration="topicIteration">
				{topic.title}<f:if condition="{topicIteration.isLast}"><f:else>, </f:else></f:if>
		</f:for>
	</f:if>
</div>
<f:if condition="{event.speaker}">
	<f:for each="{event.speaker}" as="speaker">
		{speaker.name}
	</f:for>
</f:if>
<div class="layer teaserAndDescr">
	<f:if condition="{event.teaser}">
		<f:if condition="{settings.show.displayTeaser}">
			<div class="teaser">
				<f:format.nl2br><p>{event.teaser}</p></f:format.nl2br>
			</div>
		</f:if>
	</f:if>

	<div class="description">
		<f:format.html>{event.description}</f:format.html>
	</div>
</div>

<f:if condition="{event.location}">
	<f:then>
		<div class="location layer">
			<h3 class="label"><f:translate key="location" /></h3>
			<p>
				<f:if condition="{event.location.www}">
						<f:then>
							<f:link.external uri="{event.location.www}" title="Homepage: {event.location.name}">{event.location.name}<br /></f:link.external>
						</f:then>
						<f:else>{event.location.name}<br /></f:else>
				</f:if>
				<f:if condition="{event.location.organization}">{event.location.organization}<br /></f:if>
				<f:if condition="{event.location.department}">{event.location.department}<br /></f:if>
				<f:if condition="{event.location.street}">{event.location.street} {event.location.streetNumber}<br /></f:if>
				<f:if condition="{event.location.addressSupplement}">{event.location.addressSupplement}<br /></f:if>
				<f:if condition="{event.location.city}">{event.location.zip} {event.location.city}</f:if>
			</p>
			<f:if condition="{event.locationAlternative}">
				<p><f:format.nl2br>{event.locationAlternative}</f:format.nl2br></p>
			</f:if>
			<p>
				<f:if condition="{event.location.phone}"><f:translate key="phone" /> {event.location.phone}<br /></f:if>
				<f:if condition="{event.location.mobile}"><f:translate key="mobile" /> {event.location.mobile}<br /></f:if>
				<f:if condition="{event.location.email}"><f:translate key="email" /> {event.location.email}<br /></f:if>
				<f:if condition="{event.location.fax}"><f:translate key="fax" /> {event.location.fax}<br /></f:if>
			</p>
			<f:if condition="{event.location.description}">
				<f:format.html>{event.location.description}</f:format.html>
			</f:if>

		</div>
	</f:then>
	<f:else>
		<f:if condition="{event.locationAlternative}">
			<div class="location layer">
				<h3 class="label"><f:translate key="location" /></h3>
				<p><f:format.nl2br>{event.locationAlternative}</f:format.nl2br></p>
			</div>
		</f:if>
	</f:else>
</f:if>

<f:if condition="{event.organizer}">
	<f:then>
		<div class="organizer layer">
			<h3 class="label"><f:translate key="organizer" /></h3>
			<p>
				<f:if condition="{event.organizer.www}">
						<f:then>
							<f:link.external uri="{event.organizer.www}" title="Homepage: {event.organizer.name}">{event.organizer.name}<br /></f:link.external>
						</f:then>
						<f:else>{event.organizer.name}<br /></f:else>
				</f:if>
				<f:if condition="{event.organizer.organization}">{event.organizer.organization}<br /></f:if>
				<f:if condition="{event.organizer.department}">{event.organizer.department}<br /></f:if>
				<f:if condition="{event.organizer.street}">{event.organizer.street} {event.organizer.streetNumber}<br /></f:if>
				<f:if condition="{event.organizer.addressSupplement}">{event.organizer.addressSupplement}<br /></f:if>
				<f:if condition="{event.organizer.city}">{event.organizer.zip} {event.organizer.city}</f:if>
			</p>
			<p>
				<f:if condition="{event.organizer.phone}"><f:translate key="phone" /> {event.organizer.phone}<br /></f:if>
				<f:if condition="{event.organizer.mobile}"><f:translate key="mobile" /> {event.organizer.mobile}<br /></f:if>
				<f:if condition="{event.organizer.email}"><f:translate key="email" /> <f:link.email email="{event.organizer.email}" class="mail">{event.organizer.email}</f:link.email><br /></f:if>
				<f:if condition="{event.organizer.fax}"><f:translate key="fax" /> {event.organizer.fax}</f:if>
			</p>
		</div>
	</f:then>
	<f:else>
		<f:if condition="{event.organizerAlternative}">
			<div class="organizer layer">
				<h3 class="label"><f:translate key="organizer" /></h3>
				<p><f:format.nl2br>{event.organizerAlternative}</f:format.nl2br></p>
			</div>
		</f:if>
	</f:else>
</f:if>

<f:if condition="{event.contact}">
	<f:then>
		<div class="contact layer">
			<h3 class="label"><f:translate key="contact" /></h3>
			<p>
				<f:if condition="{event.contact.www}">
						<f:then>
							<f:link.external uri="{event.contact.www}" title="Homepage: {event.contact.name}">{event.contact.name}<br /></f:link.external>
						</f:then>
						<f:else>{event.contact.name}<br /></f:else>
				</f:if>
				<f:if condition="{event.contact.organization}">{event.contact.organization}<br /></f:if>
				<f:if condition="{event.contact.department}">{event.contact.department}<br /></f:if>
				<f:if condition="{event.contact.street}">{event.contact.street} {event.contact.streetNumber}<br /></f:if>
				<f:if condition="{event.contact.addressSupplement}">{event.contact.addressSupplement}<br /></f:if>
				<f:if condition="{event.contact.city}">{event.contact.zip} {event.contact.city}</f:if>
			</p>
			<p>
				<f:if condition="{event.contact.phone}"><f:translate key="phone" /> {event.contact.phone}<br /></f:if>
				<f:if condition="{event.contact.mobile}"><f:translate key="mobile" /> {event.contact.mobile}<br /></f:if>
				<f:if condition="{event.contact.email}"><f:translate key="email" /> <f:link.email email="{event.contact.email}" class="mail">{event.contact.email}</f:link.email><br /></f:if>
				<f:if condition="{event.contact.fax}"><f:translate key="fax" /> {event.contact.fax}</f:if>
			</p>
		</div>
	</f:then>
	<f:else>
		<f:if condition="{event.contactAlternative}">
			<div class="contact layer">
				<h3 class="label"><f:translate key="contact" /></h3>
				<p><f:format.nl2br>{event.contactAlternative}</f:format.nl2br></p>
			</div>
		</f:if>
	</f:else>
</f:if>

<f:if condition="{event.fee}">
	<div class="fee layer">
		<h3 class="label"><f:translate key="fee" /></h3>
		<p><f:format.nl2br>{event.fee}</f:format.nl2br></p>
	</div>
</f:if>
<f:if condition="{event.register}">
	<div class="register layer">
		<h3 class="label"><f:translate key="register" /></h3>
		<p><f:cObject typoscriptObjectPath="plugin.tx_eventmgmt.helpers.typolink" data="{parameter:event.register.link, text:event.register.text}" /></p>
	</div>
</f:if>
<f:if condition="{event.link}">
	<div class="link layer">
		<h3 class="label"><f:translate key="link" /></h3>
		<p><f:cObject typoscriptObjectPath="plugin.tx_eventmgmt.helpers.typolink" data="{parameter:event.link.link, text:event.link.text}" /></p>
	</div>
</f:if>
<f:if condition="{event.files}">
	<div class="files layer">
		<h3 class="label"><f:translate key="files" /></h3>
		<f:for each="{event.files}" as="file" iteration="fileIteration">
			<f:cObject typoscriptObjectPath="plugin.tx_eventmgmt.helpers.typolink" data="{parameter:file.originalResource.publicUrl, text:file.originalResource.title}" /><f:if condition="{fileIteration.isLast}"><f:else><br /></f:else></f:if>
		</f:for>
	</div>
</f:if>
